(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{238:function(t,e,r){var content=r(285);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(44).default)("68b02506",content,!0,{sourceMap:!1})},284:function(t,e,r){"use strict";var n=r(238);r.n(n).a},285:function(t,e,r){(t.exports=r(43)(!1)).push([t.i,".currentTemp[data-v-78fc6232]{font-size:120px;margin:80px 0}",""])},334:function(t,e,r){"use strict";r.r(e);r(283),r(45),r(48),r(59),r(60),r(4),r(28),r(35);var n=r(3),o=(r(143),{name:"Weather",data:function(){return{snackbar:!1}},props:{data:{type:Object,required:!0}}}),c=(r(284),r(46)),l=r(63),h=r.n(l),d=r(252),m=r(324),f=r(323),v=r(325),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-container",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{staticClass:"mb-4",attrs:{cols:"12",align:"center"}},[r("h2",[t._v(t._s(t.data.city))])]),t._v(" "),r("v-col",{staticClass:"my-12",attrs:{align:"center",cols:"12"}},[r("span",{staticClass:"display-4 ml-8"},[t._v(t._s(t.data.currentTemp))])]),t._v(" "),r("v-col",{staticClass:"mt-4",attrs:{align:"center",cols:"12"}},[t._v(t._s(t.data.overcast))]),t._v(" "),r("v-col",{staticClass:"mb-8",attrs:{align:"center",cols:"12"}},[r("span",[t._v(t._s(t.data.maxTemp)+" / "+t._s(t.data.minTemp))])]),t._v(" "),r("v-col",{attrs:{align:"center",cols:"12"}},[r("v-chip",{staticClass:"font-weight-thin",attrs:{outlined:""}},[t._v("updated: "+t._s(t.data.date))])],1)],1)],1)],1)}),[],!1,null,"78fc6232",null),y=component.exports;h()(component,{VChip:d.a,VCol:m.a,VContainer:f.a,VRow:v.a});var C,w,x,k,_,D=r(102),S=r.n(D),I={components:{Weather:y},data:function(){return{isDark:!1,snackbar:!1,overlay:!1,textSnackbar:"",city:"",search:"",appId:"d944d4eb280d335ab5214b3dfae879c5",weatherData:{city:"",currentTemp:"",minTemp:"",maxTemp:"",pressure:"",humidity:"",wind:"",overcast:"",icon:"",sunrise:"",sunset:"",date:""},dayTime:"",recentCitys:[],recentCoords:{lat:"",long:""}}},watch:{overlay:function(t){var e=this;t&&setTimeout((function(){e.overlay=!1}),3e3)}},methods:{getCityInput:function(){if(this.search){var t="https://api.openweathermap.org/data/2.5/weather?q=".concat(this.search,"&units=metric&APPID=").concat(this.appId);this.getWeather(t)}},getChanged:function(t){this.search=t,this.getCityInput()},getWeather:(_=Object(n.a)(regeneratorRuntime.mark((function t(e){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:S.a.get(e).then((function(t){r.weatherData.city=t.data.name,r.weatherData.currentTemp=Math.round(t.data.main.temp).toString()+"°",r.weatherData.minTemp=Math.round(t.data.main.temp_min).toString()+"°",r.weatherData.maxTemp=Math.round(t.data.main.temp_max).toString()+"°",r.weatherData.overcast=t.data.weather[0].description,r.weatherData.date=r.getDate(1e3*t.data.dt),r.overlay=!1,""===r.weatherData.city||r.recentCitys.includes(r.weatherData.city)||(r.recentCitys.push(r.weatherData.city),r.$localForage.setItem("recentCitys",r.recentCitys))})).catch((function(t){$nuxt.isOffline?(r.textSnackbar="Your are offline! Turn your internet on to get the last data "+String.fromCodePoint(128517),r.snackbar=!0):(r.textSnackbar="Can't find data "+String.fromCodePoint(129402),r.snackbar=!0)}));case 1:case"end":return t.stop()}}),t)}))),function(t){return _.apply(this,arguments)}),getDate:function(t){var e=new Date(t);return e.toLocaleDateString("de-DE").concat(" ",e.toLocaleTimeString("de-DE"))},getUpdateTime:function(){new Date},getGeoLocation:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this.getCoords,this.geoError)},getCoords:function(t){var e=t.coords.latitude,r=t.coords.longitude,n="https://api.openweathermap.org/data/2.5/weather?units=metric&lat=".concat(e,"&lon=").concat(r,"&APPID=").concat(this.appId);this.recentCoords.lat=e,this.recentCoords.long=r,this.$localForage.setItem("recentCoords",this.recentCoords),this.getWeather(n)},geoError:function(){console.log("Can't get geo Coordinates!")},populateAutocompleteFromCache:(k=Object(n.a)(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$localForage.getItem("recentCitys");case 2:for(r in e=t.sent)""!==e[r]&&this.recentCitys.push(e[r]);case 4:case"end":return t.stop()}}),t,this)}))),function(){return k.apply(this,arguments)}),getCityName:(x=Object(n.a)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.get(e).then((function(t){r=t.data.name})).catch((function(t){console.log(t)}));case 2:return t.abrupt("return",r);case 3:case"end":return t.stop()}}),t)}))),function(t){return x.apply(this,arguments)}),registerPBS:(w=Object(n.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.permissions.query({name:"periodic-background-sync"});case 2:if("granted"!==t.sent.state){t.next=10;break}return t.next=6,navigator.serviceWorker.ready;case 6:if("periodicSync"in(e=t.sent))try{e.periodicSync.register("weather-sync",{minInterval:18e5})}catch(t){console.log(err)}t.next=11;break;case 10:console.log("PBS cannot be used");case 11:case"end":return t.stop()}}),t)}))),function(){return w.apply(this,arguments)})},mounted:(C=Object(n.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.populateAutocompleteFromCache();case 2:if(!$nuxt.isOffline){t.next=9;break}return t.next=5,this.$localForage.getItem("recentCoords");case 5:this.recentCoords=t.sent,this.recentCoords?(e="https://api.openweathermap.org/data/2.5/weather?units=metric&lat=".concat(this.recentCoords.lat,"&lon=").concat(this.recentCoords.long,"&APPID=").concat(this.appId),this.getWeather(e),this.textSnackbar="GREAT! Your are getting data from cache "+String.fromCodePoint(128525),this.snackbar=!0):(this.textSnackbar="Please go online to get some data "+String.fromCodePoint(129299),this.snackbar=!0),t.next=10;break;case 9:this.getGeoLocation();case 10:return this.overlay=!0,t.next=13,this.registerPBS();case 13:case"end":return t.stop()}}),t,this)}))),function(){return C.apply(this,arguments)})},P=r(332),T=r(336),V=r(326),R=r(327),O=r(328),j=r(329),F=r(246),W=r(330),$=Object(c.a)(I,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{column:"","justify-center":"","align-center":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-col",{attrs:{cols:"12"}},[r("v-form",{on:{submit:function(e){return e.preventDefault(),t.getCityInput(e)}}},[r("v-autocomplete",{attrs:{"search-input":t.search,label:"City",items:t.recentCitys,filled:"",rounded:"","aria-label":"search city",autocomplete:"off"},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e},change:function(e){return t.getChanged(t.city)}},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}})],1)],1),t._v(" "),r("Weather",{attrs:{data:t.weatherData}}),t._v(" "),r("v-snackbar",{model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n      "+t._s(t.textSnackbar)+"\n      "),r("v-btn",{attrs:{color:"pink",texSnackBar:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1)],1),t._v(" "),r("v-overlay",{attrs:{value:t.overlay}},[r("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)}),[],!1,null,null,null);e.default=$.exports;h()($,{VAutocomplete:P.a,VBtn:T.a,VCol:m.a,VFlex:V.a,VForm:R.a,VLayout:O.a,VOverlay:j.a,VProgressCircular:F.a,VSnackbar:W.a})}}]);